<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>litrev-mcp Reference Guide</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>litrev-mcp Reference Guide</h1>
            <p class="subtitle">AI-Assisted Literature Review with Zotero, PubMed, Semantic Scholar, and RAG Search</p>

            <div class="search-bar">
                <input type="text" id="search" placeholder="Search tools, commands, or topics...">
                <button id="theme-toggle" aria-label="Toggle dark mode">ğŸŒ™</button>
            </div>
        </header>

        <nav class="toc">
            <h3>Contents</h3>
            <ul>
                <li><a href="#quick-start">Quick Start</a></li>
                <li><a href="#messy-zotero">I Have a Messy Zotero</a></li>
                <li><a href="#cheat-sheet">Cheat Sheet</a></li>
                <li><a href="#tools">Tool Reference</a></li>
                <li><a href="#workflows">Workflows</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
            </ul>
        </nav>

        <main>
            <!-- Quick Start -->
            <section id="quick-start">
                <h2>âš¡ Quick Start (5 minutes)</h2>
                <ol>
                    <li>
                        <strong>Install litrev-mcp</strong>
                        <pre><code>uv tool install git+https://github.com/marcus-waldman/litrev_mcp.git</code></pre>
                    </li>
                    <li>
                        <strong>Get Zotero credentials</strong>
                        <p>Visit <a href="https://www.zotero.org/settings/keys" target="_blank">https://www.zotero.org/settings/keys</a> and create a new key with library access, notes access, and write access.</p>
                    </li>
                    <li>
                        <strong>Set environment variables</strong>
                        <pre><code># Add to ~/.bashrc or ~/.zshrc
export ZOTERO_API_KEY="your-api-key-here"
export ZOTERO_USER_ID="your-user-id-here"

# Optional: For RAG semantic search over PDFs
export OPENAI_API_KEY="your-openai-key"</code></pre>
                    </li>
                    <li>
                        <strong>Configure Claude Code</strong>
                        <p>Add the MCP server to Claude Code:</p>
                        <pre><code>claude mcp add litrev -- litrev-mcp</code></pre>
                    </li>
                    <li>
                        <strong>Restart Claude Code and verify</strong>
                        <div class="prompt-box">
                            <code>Use litrev_hello to verify the server is working</code>
                            <button class="copy-btn" data-text="Use litrev_hello to verify the server is working">Copy</button>
                        </div>
                        <div class="prompt-box">
                            <code>Use setup_check to verify my configuration</code>
                            <button class="copy-btn" data-text="Use setup_check to verify my configuration">Copy</button>
                        </div>
                    </li>
                    <li>
                        <strong>(Optional) Enable Google Drive links</strong>
                        <p>To automatically add Google Drive PDF links to Zotero entries:</p>
                        <ol type="a">
                            <li>Create a Google Cloud project at <a href="https://console.cloud.google.com" target="_blank">console.cloud.google.com</a></li>
                            <li>Enable the Google Drive API</li>
                            <li>Create OAuth credentials (Desktop app type)</li>
                            <li>Download <code>credentials.json</code> to <code>Literature/.litrev/credentials.json</code></li>
                        </ol>
                        <p><em>First use will prompt browser authentication. Tokens are stored locally in <code>~/.litrev-mcp/token.json</code>.</em></p>
                    </li>
                </ol>
            </section>

            <!-- Messy Zotero -->
            <section id="messy-zotero">
                <h2>ğŸ“š I Have a Messy Zotero Library</h2>
                <p>Don't worry! Here's how to get organized:</p>

                <h3>Step 1: See what you have</h3>
                <div class="prompt-box">
                    <code>List my Zotero collections with paper counts</code>
                    <button class="copy-btn" data-text="List my Zotero collections with paper counts">Copy</button>
                </div>
                <p>This shows all your collections and how many papers are in each one.</p>

                <h3>Step 2: Create a project</h3>
                <p>You can either pick an existing collection or create a new one:</p>
                <div class="prompt-box">
                    <code>Create a new Zotero collection called "Measurement Error"</code>
                    <button class="copy-btn" data-text='Create a new Zotero collection called "Measurement Error"'>Copy</button>
                </div>
                <p>Then link it to a litrev project:</p>
                <div class="prompt-box">
                    <code>Create a new project called "Measurement Error" with code "MEAS-ERR" linked to Zotero collection ABC12345</code>
                    <button class="copy-btn" data-text='Create a new project called "Measurement Error" with code "MEAS-ERR" linked to Zotero collection ABC12345'>Copy</button>
                </div>
                <p><em>Replace ABC12345 with your collection key from creating or Step 1.</em></p>

                <h3>Step 3: Identify gaps</h3>
                <div class="prompt-box">
                    <code>Show me the status of my MEAS-ERR project</code>
                    <button class="copy-btn" data-text="Show me the status of my MEAS-ERR project">Copy</button>
                </div>
                <p>This shows which papers need PDFs, which need NotebookLM processing, and which are complete.</p>

                <h3>Step 4: Get your action items</h3>
                <div class="prompt-box">
                    <code>What are all my pending actions?</code>
                    <button class="copy-btn" data-text="What are all my pending actions?">Copy</button>
                </div>
                <p>This gives you a prioritized list of what to do next: PDFs to download, papers to add to NotebookLM, etc.</p>

                <h3>Step 5: Find more papers</h3>
                <p>Now that you're organized, you can systematically add new papers:</p>
                <div class="prompt-box">
                    <code>Search PubMed for "glucose measurement error correction"</code>
                    <button class="copy-btn" data-text='Search PubMed for "glucose measurement error correction"'>Copy</button>
                </div>
                <div class="prompt-box">
                    <code>Find papers that cite Carroll's measurement error book (DOI: 10.1201/9781420010138)</code>
                    <button class="copy-btn" data-text="Find papers that cite Carroll's measurement error book (DOI: 10.1201/9781420010138)">Copy</button>
                </div>
            </section>

            <!-- Cheat Sheet -->
            <section id="cheat-sheet">
                <h2>ğŸ“‹ Cheat Sheet</h2>
                <p>Copy-paste these prompts for common tasks:</p>

                <h3>Setup & Configuration</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Check my setup</code>
                        <button class="copy-btn" data-text="Check my setup">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Create a new Zotero collection called "COLLECTION_NAME"</code>
                        <button class="copy-btn" data-text='Create a new Zotero collection called "COLLECTION_NAME"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Create a new project called "PROJECT_NAME" with code "CODE"</code>
                        <button class="copy-btn" data-text='Create a new project called "PROJECT_NAME" with code "CODE"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>List my Zotero collections</code>
                        <button class="copy-btn" data-text="List my Zotero collections">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Process the PDFs in my TEST project inbox</code>
                        <button class="copy-btn" data-text="Process the PDFs in my TEST project inbox">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Migrate Zotero server attachments to Google Drive for TEST</code>
                        <button class="copy-btn" data-text="Migrate Zotero server attachments to Google Drive for TEST">Copy</button>
                    </div>
                </div>

                <h3>Finding Papers</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Search PubMed for "YOUR QUERY"</code>
                        <button class="copy-btn" data-text='Search PubMed for "YOUR QUERY"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Search Semantic Scholar for "YOUR QUERY"</code>
                        <button class="copy-btn" data-text='Search Semantic Scholar for "YOUR QUERY"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Find papers that cite DOI: YOUR_DOI</code>
                        <button class="copy-btn" data-text="Find papers that cite DOI: YOUR_DOI">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Show me the references from DOI: YOUR_DOI</code>
                        <button class="copy-btn" data-text="Show me the references from DOI: YOUR_DOI">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Search ERIC for "YOUR EDUCATION RESEARCH QUERY"</code>
                        <button class="copy-btn" data-text='Search ERIC for "YOUR EDUCATION RESEARCH QUERY"'>Copy</button>
                    </div>
                </div>

                <h3>Adding Papers</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Add this paper to PROJECT: DOI</code>
                        <button class="copy-btn" data-text="Add this paper to PROJECT: DOI">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Add a paper manually: "Title" by Author et al (2023)</code>
                        <button class="copy-btn" data-text='Add a paper manually: "Title" by Author et al (2023)'>Copy</button>
                    </div>
                </div>

                <h3>Status Tracking</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Show me the status of PROJECT</code>
                        <button class="copy-btn" data-text="Show me the status of PROJECT">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>What papers in PROJECT need PDFs?</code>
                        <button class="copy-btn" data-text="What papers in PROJECT need PDFs?">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>What are all my pending actions?</code>
                        <button class="copy-btn" data-text="What are all my pending actions?">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Mark ITEM_KEY as complete in PROJECT</code>
                        <button class="copy-btn" data-text="Mark ITEM_KEY as complete in PROJECT">Copy</button>
                    </div>
                </div>

                <h3>Knowledge Base</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Save this Consensus summary about TOPIC to PROJECT</code>
                        <button class="copy-btn" data-text="Save this Consensus summary about TOPIC to PROJECT">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Save this Consensus summary to PROJECT and add the references to Zotero</code>
                        <button class="copy-btn" data-text="Save this Consensus summary to PROJECT and add the references to Zotero">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Search my insights for "KEYWORD"</code>
                        <button class="copy-btn" data-text='Search my insights for "KEYWORD"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>What have I learned about TOPIC from my saved insights?</code>
                        <button class="copy-btn" data-text="What have I learned about TOPIC from my saved insights?">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>List all insights for PROJECT</code>
                        <button class="copy-btn" data-text="List all insights for PROJECT">Copy</button>
                    </div>
                </div>

                <h3>RAG Literature Search</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Index my PROJECT for semantic search</code>
                        <button class="copy-btn" data-text="Index my PROJECT for semantic search">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Search my papers for "QUERY"</code>
                        <button class="copy-btn" data-text='Search my papers for "QUERY"'>Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Based on my literature, is there support for X?</code>
                        <button class="copy-btn" data-text="Based on my literature, is there support for X?">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>What does my PROJECT index contain?</code>
                        <button class="copy-btn" data-text="What does my PROJECT index contain?">Copy</button>
                    </div>
                </div>

                <h3>Writing Support</h3>
                <div class="prompt-group">
                    <div class="prompt-box">
                        <code>Get the citation key for ITEM_KEY</code>
                        <button class="copy-btn" data-text="Get the citation key for ITEM_KEY">Copy</button>
                    </div>
                    <div class="prompt-box">
                        <code>Search my PROJECT library for "KEYWORD"</code>
                        <button class="copy-btn" data-text='Search my PROJECT library for "KEYWORD"'>Copy</button>
                    </div>
                </div>
            </section>

            <!-- Tool Reference -->
            <section id="tools">
                <h2>ğŸ› ï¸ Tool Reference</h2>
                <p>All 27 MCP tools organized by category:</p>

                <h3>Zotero Integration (9 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>zotero_list_projects</code></td>
                            <td>List all Zotero collections with paper counts by status</td>
                            <td>None</td>
                        </tr>
                        <tr>
                            <td><code>zotero_create_collection</code></td>
                            <td>Create a new Zotero collection</td>
                            <td><code>name</code>, <code>parent_key</code> (optional)</td>
                        </tr>
                        <tr>
                            <td><code>zotero_add_paper</code></td>
                            <td>Add a paper to Zotero by DOI or manual metadata</td>
                            <td><code>project</code>, <code>doi</code> (or <code>title</code>, <code>authors</code>, <code>year</code>)</td>
                        </tr>
                        <tr>
                            <td><code>zotero_update_status</code></td>
                            <td>Change a paper's status tag</td>
                            <td><code>project</code>, <code>item_key</code>, <code>status</code> (needs_pdf, needs_notebooklm, complete)</td>
                        </tr>
                        <tr>
                            <td><code>zotero_get_by_status</code></td>
                            <td>Get all papers with a specific status</td>
                            <td><code>project</code>, <code>status</code></td>
                        </tr>
                        <tr>
                            <td><code>zotero_search</code></td>
                            <td>Search your Zotero library</td>
                            <td><code>project</code>, <code>query</code></td>
                        </tr>
                        <tr>
                            <td><code>zotero_get_citation_key</code></td>
                            <td>Get Better BibTeX citation key for a paper</td>
                            <td><code>project</code>, <code>item_key</code></td>
                        </tr>
                        <tr>
                            <td><code>process_pdf_inbox</code></td>
                            <td>Process PDFs in to_add folder: match to Zotero entries, rename, organize, and add Google Drive links (if configured)</td>
                            <td><code>project</code></td>
                        </tr>
                        <tr>
                            <td><code>migrate_zotero_attachments</code></td>
                            <td>Migrate PDFs stored on Zotero's servers to Google Drive. Downloads, renames with citation key, adds Drive link, deletes original. For papers added by drag-drop.</td>
                            <td><code>project</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Literature Search (5 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>pubmed_search</code></td>
                            <td>Search PubMed for biomedical literature</td>
                            <td><code>query</code>, <code>max_results</code> (default: 10)</td>
                        </tr>
                        <tr>
                            <td><code>semantic_scholar_search</code></td>
                            <td>Search Semantic Scholar across all fields</td>
                            <td><code>query</code>, <code>max_results</code> (default: 10)</td>
                        </tr>
                        <tr>
                            <td><code>semantic_scholar_references</code></td>
                            <td>Backward snowball: get papers cited BY a paper</td>
                            <td><code>paper_id</code> (DOI, S2 ID, etc.), <code>max_results</code> (default: 50)</td>
                        </tr>
                        <tr>
                            <td><code>semantic_scholar_citations</code></td>
                            <td>Forward snowball: get papers that CITE a paper</td>
                            <td><code>paper_id</code>, <code>max_results</code> (default: 50)</td>
                        </tr>
                        <tr>
                            <td><code>eric_search</code></td>
                            <td>Search ERIC for education research</td>
                            <td><code>query</code>, <code>max_results</code> (default: 10)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Knowledge Base (4 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>save_insight</code></td>
                            <td>Save Consensus/NotebookLM summaries; optionally extract DOIs and add papers to Zotero (with CrossRef metadata lookup)</td>
                            <td><code>project</code>, <code>source</code>, <code>topic</code>, <code>content</code>, <code>add_references_to_zotero</code> (optional)</td>
                        </tr>
                        <tr>
                            <td><code>search_insights</code></td>
                            <td>Search saved insights by keyword</td>
                            <td><code>query</code>, <code>project</code> (optional), <code>source</code> (optional)</td>
                        </tr>
                        <tr>
                            <td><code>analyze_insights</code></td>
                            <td>Answer questions from saved insights (detects contradictions!)</td>
                            <td><code>question</code>, <code>project</code> (optional)</td>
                        </tr>
                        <tr>
                            <td><code>list_insights</code></td>
                            <td>List all insights for a project</td>
                            <td><code>project</code>, <code>source</code> (optional)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>RAG Literature Search (4 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>index_papers</code></td>
                            <td>Index PDFs for semantic search (extracts text, chunks, generates embeddings)</td>
                            <td><code>project</code>, <code>force_reindex</code> (optional)</td>
                        </tr>
                        <tr>
                            <td><code>search_papers</code></td>
                            <td>Semantic search across indexed papers, returns passages with citations</td>
                            <td><code>query</code>, <code>project</code> (optional), <code>max_results</code> (default: 10)</td>
                        </tr>
                        <tr>
                            <td><code>ask_papers</code></td>
                            <td>Ask questions about your literature, returns formatted passages for synthesis</td>
                            <td><code>question</code>, <code>project</code> (optional), <code>max_passages</code> (default: 5)</td>
                        </tr>
                        <tr>
                            <td><code>rag_status</code></td>
                            <td>View indexing status and statistics</td>
                            <td><code>project</code> (optional)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Status & Dashboard (2 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>project_status</code></td>
                            <td>Get comprehensive project dashboard</td>
                            <td><code>project</code></td>
                        </tr>
                        <tr>
                            <td><code>pending_actions</code></td>
                            <td>Get all pending user actions (PDFs to get, papers for NotebookLM)</td>
                            <td>None</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Setup Wizard (2 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>setup_check</code></td>
                            <td>Verify configuration (Google Drive, Zotero credentials)</td>
                            <td>None</td>
                        </tr>
                        <tr>
                            <td><code>setup_create_project</code></td>
                            <td>Create new project with directory structure</td>
                            <td><code>code</code>, <code>name</code>, <code>zotero_collection_key</code> (optional)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Project Context (2 tools)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>get_project_context</code></td>
                            <td>Get project context (goal, audience, style) from _context.md</td>
                            <td><code>project</code></td>
                        </tr>
                        <tr>
                            <td><code>update_project_context</code></td>
                            <td>Create or update project context file</td>
                            <td><code>project</code>, <code>content</code></td>
                        </tr>
                    </tbody>
                </table>
                <p><strong>Tip:</strong> Use <code>/init-litrev-context PROJECT</code> for collaborative context setup.</p>

                <h3>Test Tool (1 tool)</h3>
                <table class="tool-table">
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>What it does</th>
                            <th>Key Parameters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>litrev_hello</code></td>
                            <td>Verify litrev-mcp is working</td>
                            <td>None</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Workflows -->
            <section id="workflows">
                <h2>ğŸ”„ Workflows</h2>

                <h3>Paper Lifecycle</h3>
                <pre class="workflow-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Search    â”‚  PubMed, Semantic Scholar, ERIC, Consensus
â”‚  Databases  â”‚  Citation snowballing (forward/backward)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add to      â”‚  By DOI or manual entry
â”‚ Zotero      â”‚  Tagged: _needs-pdf
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Acquire    â”‚  YOU: Download PDF to to_add/ folder
â”‚    PDF      â”‚  Run process_pdf_inbox to auto-rename
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  + Adds Google Drive link to Zotero (if configured)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Update    â”‚  Change tag: _needs-notebooklm
â”‚   Status    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add to      â”‚  YOU: Upload PDF to NotebookLM
â”‚ NotebookLM  â”‚  Get AI summaries and Q&A
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Save     â”‚  Save NotebookLM insights
â”‚  Insights   â”‚  Stored in _notes/ folder
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Mark      â”‚  Change tag: _complete
â”‚  Complete   â”‚  Ready for synthesis
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>

                <h3>Citation Snowballing</h3>
                <pre class="workflow-diagram">
Start with a key paper
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backward    â”‚         â”‚   Forward    â”‚
â”‚  Snowball    â”‚         â”‚  Snowball    â”‚
â”‚              â”‚         â”‚              â”‚
â”‚ Papers cited â”‚         â”‚ Papers that  â”‚
â”‚  BY this     â”‚         â”‚  CITE this   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
          Filter & Add to Zotero
                  â”‚
                  â–¼
          Repeat for new papers
                </pre>

                <h3>Knowledge Synthesis</h3>
                <pre class="workflow-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Consensus  â”‚  YOU: Search Consensus.app
â”‚    Search    â”‚  Copy summary
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save Insight â”‚  Save to project _notes/
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NotebookLM  â”‚  YOU: Upload PDFs
â”‚   Analysis   â”‚  Get AI analysis
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save Insight â”‚  Save to project _notes/
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Analyze    â”‚  "What have I learned about X?"
â”‚   Insights   â”‚  Detects contradictions between sources!
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Synthesis   â”‚  Write your own synthesis notes
â”‚    Notes     â”‚  Save to project _notes/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>

                <h3>RAG Literature Search</h3>
                <pre class="workflow-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Index       â”‚  Extract PDF text, chunk, embed
â”‚  Papers      â”‚  Stored in literature.duckdb
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Search     â”‚  "AIC correction for missing data"
â”‚   Papers     â”‚  Returns passages with citations
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Ask       â”‚  "Is there support for FIML over MI?"
â”‚   Papers     â”‚  Formatted context for Claude synthesis
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Synthesize  â”‚  Claude combines passages
â”‚   Answer     â”‚  with proper citations
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>

                <h3>Common Scenarios</h3>

                <details>
                    <summary><strong>Starting a new literature review</strong></summary>
                    <ol>
                        <li>Create project and link to Zotero collection</li>
                        <li>Search PubMed/Semantic Scholar for key terms</li>
                        <li>Add 5-10 foundational papers by DOI</li>
                        <li>Citation snowball from 2-3 most relevant papers</li>
                        <li>Review pending actions to prioritize PDF acquisition</li>
                    </ol>
                </details>

                <details>
                    <summary><strong>Organizing existing papers</strong></summary>
                    <ol>
                        <li>List Zotero collections to see what you have</li>
                        <li>Create project linked to most relevant collection</li>
                        <li>Check project status to identify gaps (missing PDFs)</li>
                        <li>Get pending actions for prioritized task list</li>
                        <li>Work through actions systematically</li>
                    </ol>
                </details>

                <details>
                    <summary><strong>Writing a paper</strong></summary>
                    <ol>
                        <li>Search insights for key concepts: "What have I learned about SIMEX?"</li>
                        <li>Analyze insights to find contradictions or gaps</li>
                        <li>Get citation keys for papers you want to cite</li>
                        <li>Search Zotero library for specific claims or methods</li>
                        <li>Write synthesis notes as you draft sections</li>
                    </ol>
                </details>

                <details>
                    <summary><strong>Deep diving on a topic</strong></summary>
                    <ol>
                        <li>Search Consensus for high-level synthesis</li>
                        <li>Save Consensus summary as insight</li>
                        <li>Extract key papers from Consensus results</li>
                        <li>Add papers to Zotero, get PDFs</li>
                        <li>Upload PDFs to NotebookLM for detailed analysis</li>
                        <li>Save NotebookLM insights</li>
                        <li>Use analyze_insights to synthesize across sources</li>
                    </ol>
                </details>
            </section>

            <!-- Troubleshooting -->
            <section id="troubleshooting">
                <h2>ğŸ”§ Troubleshooting</h2>

                <h3>Server not responding</h3>
                <p><strong>Problem:</strong> Claude Code doesn't show litrev-mcp tools</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Verify installation: <code>which litrev-mcp</code> (should show path)</li>
                    <li>Check Claude Code MCP config is correct (see Quick Start)</li>
                    <li>Restart Claude Code completely</li>
                    <li>Test server directly: <code>python -m litrev_mcp.server</code></li>
                </ol>

                <h3>Google Drive path not detected</h3>
                <p><strong>Problem:</strong> "Google Drive path not detected" error</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Set environment variable: <code>export LITREV_DRIVE_PATH="/path/to/Google Drive"</code></li>
                    <li>On Windows, try: <code>G:\My Drive</code></li>
                    <li>On Mac, try: <code>~/Library/CloudStorage/GoogleDrive-*/My Drive</code></li>
                    <li>Ensure Google Drive is syncing and mounted</li>
                </ol>

                <h3>Zotero credentials not working</h3>
                <p><strong>Problem:</strong> "ZOTERO_API_KEY not set" or authentication errors</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Verify variables are set: <code>echo $ZOTERO_API_KEY</code></li>
                    <li>Check you added them to the right shell config (<code>~/.bashrc</code>, <code>~/.zshrc</code>)</li>
                    <li>Reload shell: <code>source ~/.bashrc</code></li>
                    <li>Verify key has correct permissions (library access, write access)</li>
                    <li>Try creating a new API key at <a href="https://www.zotero.org/settings/keys" target="_blank">Zotero settings</a></li>
                </ol>

                <h3>Project not found</h3>
                <p><strong>Problem:</strong> "Project 'XYZ' not found" error</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Check project code is correct (case-sensitive)</li>
                    <li>List projects: "List my projects"</li>
                    <li>Create project if needed: "Create a new project..."</li>
                    <li>Verify <code>Literature/.litrev/config.yaml</code> exists</li>
                </ol>

                <h3>Papers not showing status tags</h3>
                <p><strong>Problem:</strong> Papers in Zotero don't have _needs-pdf tags</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Status tags are only applied to NEW papers added via litrev-mcp</li>
                    <li>For existing papers, manually add tags in Zotero</li>
                    <li>Or re-add them via litrev-mcp using their DOIs</li>
                    <li>Check config.yaml has correct status_tags defined</li>
                </ol>

                <h3>Can't find citation key</h3>
                <p><strong>Problem:</strong> "Citation key not found" or getting generic keys</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Ensure Better BibTeX plugin is installed in Zotero</li>
                    <li>Check BBT settings for citation key pattern</li>
                    <li>Refresh citation keys in Zotero (right-click â†’ Better BibTeX â†’ Refresh)</li>
                    <li>Wait a moment for BBT to generate keys for new papers</li>
                </ol>

                <h3>Rate limit errors</h3>
                <p><strong>Problem:</strong> "Rate limit exceeded" when searching</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li><strong>PubMed:</strong> Get free API key from <a href="https://www.ncbi.nlm.nih.gov/account/" target="_blank">NCBI</a> (increases limit from 3/sec to 10/sec)</li>
                    <li><strong>Semantic Scholar:</strong> Get free API key from <a href="https://www.semanticscholar.org/product/api" target="_blank">Semantic Scholar</a> (increases limit from 100/5min to 5000/5min)</li>
                    <li>Add keys to environment: <code>export NCBI_API_KEY="..." SEMANTIC_SCHOLAR_API_KEY="..."</code></li>
                    <li>Wait a few minutes and try again</li>
                </ul>

                <h3>RAG search not working</h3>
                <p><strong>Problem:</strong> "OPENAI_API_KEY not set" or embedding errors</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Get API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI</a></li>
                    <li>Add to shell config: <code>export OPENAI_API_KEY="your-key"</code></li>
                    <li>Reload shell: <code>source ~/.bashrc</code></li>
                    <li>Restart Claude Code</li>
                </ol>

                <h3>Papers not being indexed</h3>
                <p><strong>Problem:</strong> "No PDF found" for papers during indexing</p>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Ensure PDFs are in the project folder (e.g., <code>Literature/PROJECT/</code>)</li>
                    <li>PDFs must be named with citation key (e.g., <code>smith_glucose_2020.pdf</code>)</li>
                    <li>Run <code>process_pdf_inbox</code> to auto-rename PDFs</li>
                    <li>Check that Better BibTeX is generating citation keys in Zotero</li>
                </ol>

                <h3>Scanned PDFs not searchable</h3>
                <p><strong>Problem:</strong> "PDF has no extractable text"</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Scanned/image-only PDFs cannot be indexed (OCR limitation)</li>
                    <li>Try to obtain a text-based version of the PDF</li>
                    <li>Use OCR software to create a searchable PDF first</li>
                </ul>

                <h3>RAG storage optimization</h3>
                <p><strong>Problem:</strong> Database growing too large with many papers</p>
                <p><strong>Solution:</strong> Reduce embedding dimensions in <code>config.yaml</code>:</p>
                <pre><code># Literature/.litrev/config.yaml
rag:
  embedding_dimensions: 512  # Default is 1536</code></pre>
                <table>
                    <thead>
                        <tr><th>Dimensions</th><th>Storage/chunk</th><th>Accuracy</th><th>Use case</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>1536 (default)</td><td>~6 KB</td><td>Best</td><td>Small collections</td></tr>
                        <tr><td>512</td><td>~2 KB</td><td>~95%</td><td>Large collections</td></tr>
                        <tr><td>256</td><td>~1 KB</td><td>~90%</td><td>Very large collections</td></tr>
                    </tbody>
                </table>
                <p><em>Note: Changing dimensions requires deleting <code>literature.duckdb</code> and re-indexing all papers.</em></p>
            </section>

            <footer>
                <p>Built with litrev-mcp v0.2.1 | <a href="https://github.com/marcus-waldman/litrev_mcp" target="_blank">GitHub</a></p>
            </footer>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
